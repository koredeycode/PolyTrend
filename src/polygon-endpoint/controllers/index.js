import axios from 'axios';

const btcdata = {
  ticker: 'X:BTCUSD',
  queryCount: 1440,
  resultsCount: 48,
  adjusted: true,
  results: [
    {
      v: 1605.1093676500006,
      vw: 17138.0932,
      o: 17141,
      c: 17110.68,
      h: 17197,
      l: 17102.97,
      t: 1673222400000,
      n: 24285,
    },
    {
      v: 1037.6053262400014,
      vw: 17156.1145,
      o: 17110.01,
      c: 17183.61,
      h: 17219,
      l: 17103.27,
      t: 1673224200000,
      n: 20547,
    },
    {
      v: 695.3986847300005,
      vw: 17165.0844,
      o: 17201,
      c: 17167.59,
      h: 17202,
      l: 17144.3,
      t: 1673226000000,
      n: 16521,
    },
    {
      v: 1151.7512278599997,
      vw: 17186.8073,
      o: 17167.58,
      c: 17173.58,
      h: 17244,
      l: 17146.33,
      t: 1673227800000,
      n: 20540,
    },
    {
      v: 1009.320685290001,
      vw: 17191.4744,
      o: 17173.59,
      c: 17224.52,
      h: 17235,
      l: 17159.7,
      t: 1673229600000,
      n: 21752,
    },
    {
      v: 1178.0079644399998,
      vw: 17221.6388,
      o: 17224.52,
      c: 17191.27,
      h: 17262,
      l: 17184.52,
      t: 1673231400000,
      n: 21105,
    },
    {
      v: 404.27115004000007,
      vw: 17188.6284,
      o: 17201,
      c: 17186.76,
      h: 17206,
      l: 17179.17,
      t: 1673233200000,
      n: 9812,
    },
    {
      v: 427.11797400999984,
      vw: 17202.9595,
      o: 17185.84,
      c: 17196.86,
      h: 17231,
      l: 17176.9,
      t: 1673235000000,
      n: 9472,
    },
    {
      v: 603.1027450400001,
      vw: 17210.6256,
      o: 17198.3,
      c: 17227.9,
      h: 17249,
      l: 17193.58,
      t: 1673236800000,
      n: 11075,
    },
    {
      v: 695.6967195400003,
      vw: 17231.9594,
      o: 17229.53,
      c: 17225.49,
      h: 17260,
      l: 17218.65,
      t: 1673238600000,
      n: 11534,
    },
    {
      v: 571.9216091100001,
      vw: 17235.9266,
      o: 17225.57,
      c: 17233.67,
      h: 17269,
      l: 17218.01,
      t: 1673240400000,
      n: 9643,
    },
    {
      v: 457.6806745200003,
      vw: 17217.7126,
      o: 17234.13,
      c: 17225,
      h: 17256,
      l: 17200.58,
      t: 1673242200000,
      n: 8516,
    },
    {
      v: 341.0087872999999,
      vw: 17206.4385,
      o: 17204.95,
      c: 17208.98,
      h: 17228,
      l: 17191.54,
      t: 1673244000000,
      n: 7490,
    },
    {
      v: 344.7553914,
      vw: 17201.0087,
      o: 17207.91,
      c: 17189.55,
      h: 17227,
      l: 17180.27,
      t: 1673245800000,
      n: 6999,
    },
    {
      v: 381.14263152999996,
      vw: 17195.7775,
      o: 17192.1,
      c: 17200.78,
      h: 17229,
      l: 17182.94,
      t: 1673247600000,
      n: 6732,
    },
    {
      v: 401.9813287699997,
      vw: 17199.9692,
      o: 17201.01,
      c: 17195.85,
      h: 17226,
      l: 17190.28,
      t: 1673249400000,
      n: 6090,
    },
    {
      v: 368.3739209600001,
      vw: 17196.4584,
      o: 17221,
      c: 17207.74,
      h: 17227,
      l: 17184.94,
      t: 1673251200000,
      n: 6227,
    },
    {
      v: 512.0583518800001,
      vw: 17211.7884,
      o: 17207.73,
      c: 17216,
      h: 17255,
      l: 17188.49,
      t: 1673253000000,
      n: 7721,
    },
    {
      v: 291.43012478,
      vw: 17204.8403,
      o: 17215,
      c: 17214.54,
      h: 17234,
      l: 17188.5,
      t: 1673254800000,
      n: 5232,
    },
    {
      v: 1265.1588038699997,
      vw: 17244.4668,
      o: 17214.54,
      c: 17237.76,
      h: 17285,
      l: 17214.06,
      t: 1673256600000,
      n: 13258,
    },
    {
      v: 733.5175030100006,
      vw: 17253.9959,
      o: 17260,
      c: 17259.36,
      h: 17291,
      l: 17234.72,
      t: 1673258400000,
      n: 9328,
    },
    {
      v: 666.8177925499998,
      vw: 17267.2367,
      o: 17259.35,
      c: 17262.69,
      h: 17292,
      l: 17251.25,
      t: 1673260200000,
      n: 9138,
    },
    {
      v: 387.85130473,
      vw: 17266.4163,
      o: 17279,
      c: 17285,
      h: 17292,
      l: 17253.59,
      t: 1673262000000,
      n: 8099,
    },
    {
      v: 311.3566739000001,
      vw: 17253.9924,
      o: 17267.16,
      c: 17238.52,
      h: 17284,
      l: 17235.82,
      t: 1673263800000,
      n: 6991,
    },
    {
      v: 317.7958679499999,
      vw: 17243.8823,
      o: 17238.87,
      c: 17254,
      h: 17264,
      l: 17235.14,
      t: 1673265600000,
      n: 7324,
    },
    {
      v: 396.4028563200001,
      vw: 17241.3963,
      o: 17253,
      c: 17247.43,
      h: 17266,
      l: 17226.02,
      t: 1673267400000,
      n: 9175,
    },
    {
      v: 443.96418168,
      vw: 17256.0346,
      o: 17247.42,
      c: 17279,
      h: 17279,
      l: 17241,
      t: 1673269200000,
      n: 9126,
    },
    {
      v: 875.9063047100005,
      vw: 17245.9529,
      o: 17267.44,
      c: 17220,
      h: 17308,
      l: 17189.11,
      t: 1673271000000,
      n: 14841,
    },
    {
      v: 654.8039245700003,
      vw: 17234.3877,
      o: 17235,
      c: 17243.11,
      h: 17260,
      l: 17203.7,
      t: 1673272800000,
      n: 11731,
    },
    {
      v: 1129.887251060001,
      vw: 17244.0801,
      o: 17244.36,
      c: 17262.26,
      h: 17280,
      l: 17216.03,
      t: 1673274600000,
      n: 16354,
    },
    {
      v: 1094.7728489000012,
      vw: 17265.0563,
      o: 17263,
      c: 17237.58,
      h: 17320,
      l: 17226.13,
      t: 1673276400000,
      n: 16040,
    },
    {
      v: 1500.3329292600004,
      vw: 17287.8722,
      o: 17237.72,
      c: 17267.73,
      h: 17343,
      l: 17237.3,
      t: 1673278200000,
      n: 19332,
    },
    {
      v: 1218.2348400100004,
      vw: 17295.9765,
      o: 17268.24,
      c: 17301.76,
      h: 17351,
      l: 17267.17,
      t: 1673280000000,
      n: 17635,
    },
    {
      v: 1197.9692318400007,
      vw: 17331.4943,
      o: 17302.75,
      c: 17328.07,
      h: 17359,
      l: 17302.08,
      t: 1673281800000,
      n: 20315,
    },
    {
      v: 1491.26298194,
      vw: 17349.102,
      o: 17337,
      c: 17354.28,
      h: 17385,
      l: 17313.84,
      t: 1673283600000,
      n: 21261,
    },
    {
      v: 783.7043598000004,
      vw: 17339.3401,
      o: 17355.4,
      c: 17356.9,
      h: 17366,
      l: 17324.03,
      t: 1673285400000,
      n: 14365,
    },
    {
      v: 1030.7643619600008,
      vw: 17377.2266,
      o: 17365,
      c: 17377.85,
      h: 17400,
      l: 17349.7,
      t: 1673287200000,
      n: 17433,
    },
    {
      v: 1086.183324360001,
      vw: 17351.6996,
      o: 17377.6,
      c: 17350,
      h: 17397,
      l: 17323.73,
      t: 1673289000000,
      n: 20769,
    },
    {
      v: 763.4465112400007,
      vw: 17334.681,
      o: 17353,
      c: 17327.77,
      h: 17354,
      l: 17311.02,
      t: 1673290800000,
      n: 18478,
    },
    {
      v: 752.4707695800006,
      vw: 17323.5907,
      o: 17327.77,
      c: 17294.46,
      h: 17344,
      l: 17293.54,
      t: 1673292600000,
      n: 15278,
    },
    {
      v: 1492.8877545200012,
      vw: 17261.3848,
      o: 17302,
      c: 17247.14,
      h: 17312,
      l: 17227.15,
      t: 1673294400000,
      n: 24127,
    },
    {
      v: 1406.111863760001,
      vw: 17207.6198,
      o: 17247.22,
      c: 17218.8,
      h: 17255,
      l: 17176.06,
      t: 1673296200000,
      n: 23338,
    },
    {
      v: 900.4201670300017,
      vw: 17219.4915,
      o: 17219.13,
      c: 17232.73,
      h: 17248,
      l: 17193.21,
      t: 1673298000000,
      n: 17444,
    },
    {
      v: 1138.3349519400008,
      vw: 17192.9877,
      o: 17231.9,
      c: 17180,
      h: 17242,
      l: 17163.77,
      t: 1673299800000,
      n: 15563,
    },
    {
      v: 506.7780474700002,
      vw: 17186.413,
      o: 17179.81,
      c: 17206.99,
      h: 17213,
      l: 17165.71,
      t: 1673301600000,
      n: 9374,
    },
    {
      v: 361.90452533999985,
      vw: 17211.2875,
      o: 17208.05,
      c: 17204.63,
      h: 17225,
      l: 17190.04,
      t: 1673303400000,
      n: 8777,
    },
    {
      v: 755.6519672400004,
      vw: 17168.5971,
      o: 17204.16,
      c: 17170.69,
      h: 17209,
      l: 17128.67,
      t: 1673305200000,
      n: 15414,
    },
    {
      v: 335.3231369299997,
      vw: 17184.486,
      o: 17170.68,
      c: 17177.98,
      h: 17200,
      l: 17169.1,
      t: 1673307000000,
      n: 9545,
    },
  ],
  status: 'OK',
  request_id: 'c7ae0b35f05896999763b2ce4f5a9dd3',
  count: 48,
};

const home = (req, res) => {
  res.json({ message: 'Hello from the polygon endpoint!' });
};

const status = (req, res) => {
  res.json({ status: 'ok' });
};

const polygon = async (req, res) => {
  // const getTicker = (type, ticker) => {
  //   switch (type) {
  //     case 'crypto':
  //       return `X:${ticker}`;
  //     case 'forex':
  //       return `C:${ticker}`;
  //     case 'options':
  //       return `O:${ticker}`;
  //     default:
  //       return ticker;
  //   }
  // };
  // try {
  //   const { type, ticker, multiplier, timespan, from, to } = req.body;
  //   const apiKey = process.env.POLYGON_API_KEY; // Replace with your actual Polygon API key

  //   // Make request to Polygon API
  //   const response = await axios.get(
  //     `https://api.polygon.io/v2/aggs/ticker/${getTicker(
  //       type,
  //       ticker,
  //     )}/range/${multiplier}/${timespan}/${from}/${to}?apiKey=${apiKey}`,
  //   );

  //   // Extract and send the data from Polygon API response
  //   const responseData = response.data;
  //   if (responseData.resultsCount == 0)
  //     return res
  //       .status(404)
  //       .json({ message: `No data found for the ticker ${ticker}` });
  //   res.json(responseData);
  // } catch (error) {
  //   // Handle errors
  //   // console.error('Error making request to Polygon API:', error);
  //   console.error(error.message);
  //   res.status(500).json({ message: 'Internal Server Error' });
  // }
  res.json(btcdata);
  // res.status(500).json({ message: 'intentional failure' });
};

export { home, status, polygon };
